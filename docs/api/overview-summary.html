<!--
http://www.apache.org/licenses/LICENSE-2.0
-->
<html>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_12) on Sat Dec 04 20:36:48 IST 2010 -->
<TITLE>
Overview
</TITLE>

<META NAME="date" CONTENT="2010-12-04">

<LINK REL ="stylesheet" TYPE="text/css" HREF="stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Overview";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Overview</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Package</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="index.html?overview-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="overview-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>

<p>HSearch is a distributed, real-time NoSQL search engine built on top of <a href="http://hbase.apache.org/docs/current/api/index.html">HBase</a>  and <a href="http://hadoop.apache.org/">Hadoop Core</a>.</p>

<h2>Getting Started</h2>
HSearch requires <a href="http://hbase.apache.org/docs/current/api/index.html">HBase</a> to be installed and running.
For testing purposes, we have simplified HBase running by launching it as a Tray Icon. You can run bin/hsearch.bat file.
This creates a tray Icon with HSearch Logo. Right-click on this icon to start and stop HBase.
<br />
<br />
HSearch machine distribution modes depends on installed HBase distribution modes.[<i>standalone</i>, <i>pseudo-distributed</i> (where all servers are run on a single host), and <i>fully-distributed</i> ].

There are two modes to run HSearch. <a href="#embedded">Embedded</a> and <a href="#server">Server</a>.
If new to HSearch start by following the Embedded instructions.


<p>The HSearch API is divided into several packages:</p>

<table border="1">
<tr><td colspan="2"><h2>Packages</h2></td></tr>
<tr valign="top"><td> 
<b><a href="com/bizosys/hsearch/dictionary/package-summary.html">com.bizosys.hsearch.dictionary</a></b> 
</td><td>
All operations are exposed via <a href="com/bizosys/hsearch/dictionary/DictionaryManager.html">DictionaryManager</a>
class.&nbsp; It also initalizes dictionry refresh batch task running at interval <a href="com/bizosys/hsearch/dictionary/DictionaryRefresh.html">DictionaryRefresh</a> via the 
scheduler to keep machines in sync in a multi machine environemnt. Operations like fuzzy search, regex search are performed
in the dictionary.
</td></tr>

<tr><td> 
<b><a href="com/bizosys/hsearch/index/package-summary.html">com.bizosys.hsearch.index</a></b>
</td><td>
Defines all value objects and processing for storage and retrieval from HSearch index. 
<a href="com/bizosys/hsearch/index/IndexReader.html">IndexReader</a> allows search and get operation. 
<a href="com/bizosys/hsearch/index/IndexWriter.html">IndexWriter</a> allows record addition and deletion from the index.
</td></tr>

<tr><td> 
<b><a href="com/bizosys/hsearch/inpipe/package-summary.html">com.bizosys.hsearch.inpipe</a></b>
</td><td>
Adding a document to the index is configurable via the pipe architecture. Multiple steps are sequenced and fed to <a href="com/bizosys/hsearch/index/IndexWriter.html">IndexWriter</a> 
for execution. This package contains all these steps. Some of the important steps are 
<a href="com/bizosys/hsearch/inpipe/FilterDuplicateId.html">FilterDuplicateId</a> Removes the record is exist with same Id,  
<a href="com/bizosys/hsearch/inpipe/ComputeTokens.html">ComputeTokens</a> tokenize the input record,  
<a href="com/bizosys/hsearch/inpipe/SaveToIndex.html">SaveToIndex</a> merge to the existing inverted index,  
<a href="com/bizosys/hsearch/inpipe/SaveToDictionary.html">SaveToDictionary</a> makes entry of all found words in dictionary,  
<a href="com/bizosys/hsearch/inpipe/SaveToPreview.html">SaveToPreview</a> stores the id, url, teaser information,  
<a href="com/bizosys/hsearch/inpipe/SaveToDetail.html">SaveToDetail</a>  stores all fields.
</td></tr>

<tr><td> 
<b><a href="com/bizosys/hsearch/outpipe/package-summary.html">com.bizosys.hsearch.outpipe</a></b>
</td><td>
Searching a document to the index is configurable via the pipe architecture. Multiple steps are sequenced and fed to <a href="com/bizosys/hsearch/index/IndexReader.html">IndexReader</a> 
for execution. This package contains all these steps. Some of the important steps are 
<a href="com/bizosys/hsearch/outpipe/HQueryParser.html">HQueryParser</a> parses input query,  
<a href="com/bizosys/hsearch/outpipe/DictionaryEnrichment.html">DictionaryEnrichment</a> looks up the dictionary to see additional information as preciousness, type,  
<a href="com/bizosys/hsearch/outpipe/ComputeStaticRanking.html">ComputeStaticRanking</a> sorts the found documents based on term weights,  
<a href="com/bizosys/hsearch/outpipe/ComputeDynamicRanking.html">ComputeDynamicRanking</a> sorts based on document meta information weight such as, Proximily (Machine and Organization Unit), Freshness, Social and Reader Tags
<a href="com/bizosys/hsearch/outpipe/BuildTeaser.html">BuildTeaser</a> Extracts the best matching section to show the results.
</td></tr>

<tr><td> 
<b><a href="com/bizosys/hsearch/filer/package-summary.html">com.bizosys.hsearch.filer</a></b>
</td><td>
Runs at HBase RegionServers. The primary responsibility is to move processing near to data and doing it parallely using multiple machines.
All classes of this folder are jarred and deployed in each HBase Region Server and accessed during Scanning as well as Get operations.
This plug-in mechanism does not modify any existing components of HBase, hence provide easier upgradation.
</td></tr>

<tr><td> 
	<b><a href="com/bizosys/hsearch/common/package-summary.html">com.bizosys.hsearch.common</a></b>
</td><td>
	Defines common classes used across packages.
</td></tr>

<tr><td> 
<b><a href="com/bizosys/hsearch/hbase/package-summary.html">com.bizosys.hsearch.hbase</a></b>
</td><td>
Provides access mechanism to HBase. 
<a href="com/bizosys/hsearch/hbase/HReader.html">HReader</a> allows data read operations as get and scan. 
<a href="com/bizosys/hsearch/hbase/HWriter.html">HWriter</a> allows data operations as insert, update and delete.
<a href="com/bizosys/hsearch/hbase/HDML.html">HDML</a> allows table operations like creation, dropping and trunction.
</td></tr>

<tr><td> 
<b><a href="com/bizosys/hsearch/lang/package-summary.html">com.bizosys.hsearch.lang</a></b>
</td><td>
Language specific classes
</td></tr>

<tr><td> 
<b><a href="com/bizosys/hsearch/query/package-summary.html">com.bizosys.hsearch.query</a></b>
</td><td>
Analyzes the query. 
</td></tr>

<tr><td> 
<b><a href="com/bizosys/hsearch/schema/package-summary.html">com.bizosys.hsearch.schema</a></b>
</td><td>
Creates necessary HBase tables for storage. 
</td></tr>

<tr><td> 
<b><a href="com/bizosys/hsearch/shard/package-summary.html">com.bizosys.hsearch.shard</a></b>
</td><td>
With growing index, the network will get jammed as inverted index tables will be distributed 
across machines. This will happen primarily because data access pattern will not have any 
machine affinity. To create machine affinity, HSearchServer will run in multiple index cluster
zones and the queries will run in a federated way. This mechanism of scalability is not yet implemented.
</td></tr>

<tr><td> 
<b><a href="com/bizosys/hsearch/util/package-summary.html">com.bizosys.hsearch.util</a></b>
</td><td>
Common utility packages. 
</td></tr>
</table>

<a name="embedded"><h3>Embedded Mode</h3></a>
In the embedded mode, the engine runs inside the embedding application process.
<lu>
	<li>Copy the hsearch-*-termfilter.jar file to the HBase lib folder.</li>
	<li>Add HSearch/conf folder to your classpath</li>
	<li>Edit hbase-site.xml file to set hbase.cluster.distributed, hbase.rootdir, hbase.zookeeper.quorum, zookeeper.znode.parent properties.</li>
	<li>Add hsearch-*-core.jar and HSearch/lib/*.jar files to your classpath</li>
	<li>Start your HBase server.</li>
</lu>

<a name="server"><h3>Server Mode</h3></a>
In the server mode, HSearch runs inside a servlet container (e.g. Tomcat). It exposes the 
services via REST Apis. Read details about the exposed <a href="rest.html">rest apis</a>
<lu>
	<li>Copy the hsearch-*-termfilter.jar file to the HBase lib folder.</li>
	<li>Start HBase instances</li>
	<li>Open hsearch-*.war file  and edit hbase-site.xml file to set hbase.cluster.distributed, hbase.rootdir, hbase.zookeeper.quorum, zookeeper.znode.parent properties.</li>
	<li>Copy the hsearch-*.war file to the webapps folder of Tomcat.</li>
	<li>Start the Servlet Engine.</li>
</lu>
You can access the APIs via http://a.b.c.d/hsearch-0.89/service.html?service=discovery&action=index

<h2>Example API Usage</h2>
<p>
Here's a simple example how to use HSearch for indexing and searching (using JUnit
to check if the results are what we expect):
For details Please refer to <code>com/bizosys/hsearch/index/IndexReaderTest.java</code> and 
<code>com/bizosys/hsearch/index/IndexWriterTest.java</code> files inside hsearch-0.89-src-examples.jar file.
</p>

<!-- ======================================================== -->
<!-- = Java Sourcecode to HTML automatically converted code = -->
<!-- =   Java2Html Converter 5.0 [2006-02-26] by Markus Gebhard  markus@jave.de   = -->
<!-- =     Further information: http://www.java2html.de     = -->
<div align="left" class="java">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#cccccc">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>
<font color="#3f7f5f">/*</font><br />
<font color="#3f7f5f">*&nbsp;http://www.apache.org/licenses/LICENSE-2.0</font><br />
<font color="#3f7f5f">*/</font><br />
<font color="#7f0055"><b>package&nbsp;</b></font><font color="#000000">com.bizosys.hsearch.tutorial;</font><br />
<font color="#ffffff"></font><br />
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">junit.framework.TestCase;</font><br />
<font color="#ffffff"></font><br />
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">com.bizosys.hsearch.common.HDocument;</font><br />
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">com.bizosys.hsearch.index.DocTeaser;</font><br />
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">com.bizosys.hsearch.index.IndexReader;</font><br />
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">com.bizosys.hsearch.index.IndexWriter;</font><br />
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">com.bizosys.hsearch.query.QueryContext;</font><br />
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">com.bizosys.hsearch.query.QueryResult;</font><br />
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">com.bizosys.oneline.conf.Configuration;</font><br />
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">com.bizosys.oneline.services.ServiceFactory;</font><br />
<font color="#ffffff"></font><br />
<font color="#ffffff"></font><br />
<font color="#7f0055"><b>public&nbsp;class&nbsp;</b></font><font color="#000000">OneMinuteTutorial&nbsp;</font><font color="#7f0055"><b>extends&nbsp;</b></font><font color="#000000">TestCase&nbsp;</font><font color="#000000">{</font><br />
<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;static&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">main</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">[]&nbsp;</font><font color="#000000">args</font><font color="#000000">)&nbsp;</font><font color="#7f0055"><b>throws&nbsp;</b></font><font color="#000000">Exception&nbsp;</font><font color="#000000">{</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Configuration&nbsp;conf&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">Configuration</font><font color="#000000">()</font><font color="#000000">;&nbsp;</font><font color="#3f7f5f">//Load&nbsp;configuration&nbsp;file&nbsp;(site.xml)</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">ServiceFactory.getInstance</font><font color="#000000">()</font><font color="#000000">.init</font><font color="#000000">(</font><font color="#000000">conf,&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">)</font><font color="#000000">;&nbsp;</font><font color="#3f7f5f">//Initialize&nbsp;all&nbsp;services</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">OneMinuteTutorial.testHello</font><font color="#000000">(</font><font color="#2a00ff">&#34;BIZOSYS-001&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;Welcome&nbsp;to&nbsp;hello&nbsp;world&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;hello&#34;</font><font color="#000000">)</font><font color="#000000">;&nbsp;</font><font color="#3f7f5f">//Run&nbsp;Helloworld</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br />
<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;static&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">testHello</font><font color="#000000">(</font><font color="#000000">String&nbsp;id,&nbsp;String&nbsp;title,&nbsp;String&nbsp;query</font><font color="#000000">)&nbsp;</font><font color="#7f0055"><b>throws&nbsp;</b></font><font color="#000000">Exception&nbsp;&nbsp;</font><font color="#000000">{</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">IndexWriter.getInstance</font><font color="#000000">()</font><font color="#000000">.insert</font><font color="#000000">(</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HDocument</font><font color="#000000">(</font><font color="#000000">id,&nbsp;title</font><font color="#000000">))</font><font color="#000000">;&nbsp;</font><font color="#3f7f5f">//Index&nbsp;a&nbsp;HDocument</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">QueryContext&nbsp;ctx&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">QueryContext</font><font color="#000000">(</font><font color="#000000">query</font><font color="#000000">)</font><font color="#000000">;&nbsp;</font><font color="#3f7f5f">//Form&nbsp;a&nbsp;query&nbsp;context</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">QueryResult&nbsp;res&nbsp;=&nbsp;IndexReader.getInstance</font><font color="#000000">()</font><font color="#000000">.search</font><font color="#000000">(</font><font color="#000000">ctx</font><font color="#000000">)</font><font color="#000000">;&nbsp;</font><font color="#3f7f5f">//Perform&nbsp;Search</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#990000">1</font><font color="#000000">,&nbsp;res.teasers.length</font><font color="#000000">)</font><font color="#000000">;&nbsp;</font><font color="#3f7f5f">//Matching&nbsp;records&nbsp;count</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">DocTeaser&nbsp;firstRecord&nbsp;=&nbsp;</font><font color="#000000">(</font><font color="#000000">DocTeaser</font><font color="#000000">)&nbsp;</font><font color="#000000">res.teasers</font><font color="#000000">[</font><font color="#990000">0</font><font color="#000000">]</font><font color="#000000">;&nbsp;</font><font color="#3f7f5f">//Get&nbsp;first&nbsp;record</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">System.out.println</font><font color="#000000">(</font><font color="#000000">firstRecord.getId</font><font color="#000000">()&nbsp;</font><font color="#000000">+&nbsp;</font><font color="#2a00ff">&#34;\n&#34;&nbsp;</font><font color="#000000">+&nbsp;firstRecord.title.toString</font><font color="#000000">())</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br />
<font color="#000000">}</font></code>
    
   </td>
  <!-- end source code -->
   </tr>
</table>
</div>
<!-- =       END of automatically generated HTML code       = -->
<!-- ======================================================== -->

</body>
</html>
